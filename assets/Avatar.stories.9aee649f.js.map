{"version":3,"file":"Avatar.stories.9aee649f.js","sources":["../../src/components/avatar/Avatar.tsx"],"sourcesContent":["import { animated, useChain, useSpring, useSpringRef } from '@react-spring/web';\nimport { useEffect, useState } from 'react';\nimport { clsx } from '../../utils';\nimport { Spinner } from '../spinner';\nimport { avatarStyles } from './avatar.css';\n\ntype Props = {\n  src: string;\n  bg?: 'white';\n  name?: string;\n  size?: 's' | 'm' | 'l';\n  alt?: string;\n  className?: string;\n};\n\nexport const Avatar = ({ src, bg, size, alt, className }: Props) => {\n  const [loading, setLoading] = useState(true);\n  const imgSpringRef = useSpringRef();\n  const spinnerSpringRef = useSpringRef();\n  const styles = useSpring({\n    opacity: loading ? 0 : 1,\n    ref: imgSpringRef,\n  });\n  const spinStyles = useSpring({\n    opacity: loading ? 1 : 0,\n    ref: spinnerSpringRef,\n  });\n\n  useChain([spinnerSpringRef, imgSpringRef]);\n\n  useEffect(() => {\n    const pImg = new Image();\n    pImg.onload = () => setLoading(false);\n    pImg.src = src;\n  }, [src]);\n\n  return (\n    <div className={clsx(avatarStyles.container({ bg, size }), className)}>\n      {loading ? (\n        <animated.div className={avatarStyles.loading} style={spinStyles}>\n          <Spinner size={size} />\n        </animated.div>\n      ) : (\n        <animated.img src={src} alt={alt} className={avatarStyles.img} style={styles} />\n      )}\n    </div>\n  );\n};\n"],"names":["Avatar","src","bg","size","alt","loading","setLoading","useState","imgSpringRef","useSpringRef","spinnerSpringRef","styles","useSpring","spinStyles","useChain","useEffect","pImg","_jsx","clsx","avatarStyles","animated","img"],"mappings":"gmBAeO,MAAAA,EAAA,CAAA,CAAgB,IAAAC,EAAEA,GAAAA,EAAKC,KAAAA,EAAIC,IAAAA,EAAMC,UAAAA,CAAjB,IAAA,CACrB,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,QAAA,SAAA,EAAA,EACAC,EAAAC,IACAC,EAAAD,IACAE,EAAAC,EAAA,CAAyB,QAAAP,EAAA,EAAA,EACA,IAAAG,CAClBA,CAAAA,EAEPK,EAAAD,EAAA,CAA6B,QAAAP,EAAA,EAAA,EACJ,IAAAK,CAClBA,CAAAA,EAGPI,OAAAA,EAAAA,CAAAA,EAAAA,CAAAA,CAAAA,EAEAC,EAAAA,QAAAA,UAAAA,IAAAA,CACE,MAAAC,EAAA,IAAA,MACAA,EAAAA,OAAAA,IAAAA,EAAAA,EAAAA,EACAA,EAAAA,IAAAA,CAAWf,EAAAA,CAAAA,CAAAA,CAAAA,EAGbgB,EAAA,MAAA,CACE,UAAAC,EAAAC,EAAA,UAAA,CAA4C,GAAAjB,EAAEA,KAAAA,CAAIC,CAAAA,EAAAA,CAAAA,EAA9B,SAAAE,EAAAY,EAAAG,EAAA,IAAA,CAEhB,UAAAD,EAAA,QAAsCd,MAAAA,EAAgBQ,SAAAA,EAAAA,EAAAA,CACpD,KAAAV,CAAS,CAAA,CAAT,CAAA,EAAAc,EAAAG,EAAA,IAAA,CAGF,IAAAnB,EAAc,IAAAG,EAAU,UAAAe,EAAA,IAAkCE,MAAAA,CAAYV,CAAAA,CAAtE,CAAA,CAIP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}