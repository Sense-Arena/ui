{"version":3,"file":"Modal.aec3c997.js","sources":["../../src/components/modal/Modal.tsx"],"sourcesContent":["import { animated, useSpring } from '@react-spring/web';\nimport { MouseEvent, PropsWithChildren, ReactNode, useCallback, useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { CloseIcon } from '../../icons';\nimport { clsx } from '../../utils';\nimport { Card } from '../card';\nimport { IconButton } from '../icon-button';\nimport { modalStyles } from './modal.css';\n\ntype PropsModal = PropsWithChildren<{\n  open: boolean;\n  title?: ReactNode;\n  action?: ReactNode | false;\n  withPadding?: boolean;\n  className?: string;\n  cardClassName?: string;\n  withCard?: boolean;\n  size?: 's' | 'm' | 'l';\n  handleClose: () => void;\n  paddingHeader?: boolean;\n  portalNodeId?: string;\n}>;\n\nexport const Modal = ({\n  children,\n  open,\n  title,\n  action,\n  withPadding,\n  className,\n  cardClassName,\n  withCard = true,\n  size,\n  handleClose,\n  paddingHeader = true,\n  portalNodeId = 'root',\n}: PropsModal) => {\n  const [mounted, setMounted] = useState(open);\n  const [contentTop, setContentTop] = useState(0);\n  const [headerHeight, setHeaderHeight] = useState(0);\n\n  useEffect(() => {\n    if (mounted) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.removeProperty('overflow');\n    }\n  }, [mounted]);\n\n  const contentRef = useCallback(\n    (node: HTMLDivElement) => {\n      if (node) {\n        let headerHeight = 0;\n        const headersCollection = document.getElementsByTagName('header');\n        if (paddingHeader && headersCollection.length) {\n          headerHeight = headersCollection[0].getBoundingClientRect().height;\n          setHeaderHeight(headerHeight);\n        }\n        const bodyHeight = window.innerHeight;\n        const modalContentHeight = bodyHeight - headerHeight;\n        const contentHeight = node.getBoundingClientRect().height;\n        if (modalContentHeight > contentHeight) {\n          setContentTop(Math.round(modalContentHeight / 2 - contentHeight / 2));\n        } else {\n          setContentTop(0);\n        }\n      }\n    },\n    [children],\n  );\n\n  const styleContainer = useSpring({\n    opacity: open ? 1 : 0,\n    config: {\n      duration: 300,\n    },\n    onStart: () => {\n      if (open) {\n        setMounted(true);\n      }\n    },\n    onRest: () => {\n      if (!open) {\n        setMounted(false);\n      }\n    },\n  });\n\n  const styleContent = useSpring({\n    opacity: open ? 1 : 0,\n    transform: `translateY(${open ? `${contentTop}px` : '0px'})`,\n    config: {\n      duration: 300,\n    },\n  });\n\n  const onBGClick = (e: MouseEvent<HTMLDivElement>) => {\n    if (e.target === e.currentTarget) {\n      handleClose();\n    }\n  };\n\n  const portalNode = typeof window === 'undefined' ? null : document.getElementById(portalNodeId) || document.body;\n\n  if (!mounted || !portalNode) return null;\n\n  return createPortal(\n    <animated.div style={styleContainer} className={clsx(modalStyles.modalContainer, className)}>\n      <div\n        onClick={onBGClick}\n        style={{ paddingTop: paddingHeader ? headerHeight : 0 }}\n        className={modalStyles.modalContentWrapper}\n      >\n        <animated.div ref={contentRef} style={styleContent} className={modalStyles.modalContent({ size })}>\n          {withCard ? (\n            <div className={modalStyles.modalActionContainer}>\n              <div className={modalStyles.modalAction}>\n                {action === undefined ? (\n                  <IconButton onClick={handleClose}>\n                    <CloseIcon className={modalStyles.modalActionCloseIcon} />\n                  </IconButton>\n                ) : (\n                  action || null\n                )}\n              </div>\n\n              <Card\n                title={title}\n                withPadding={withPadding}\n                className={cardClassName}\n                classNameHeader={modalStyles.cardHeader}\n              >\n                {children}\n              </Card>\n            </div>\n          ) : (\n            children\n          )}\n        </animated.div>\n      </div>\n    </animated.div>,\n    portalNode,\n  );\n};\n"],"names":["Modal","children","open","title","action","withPadding","className","cardClassName","size","handleClose","portalNodeId","mounted","setMounted","useState","contentTop","setContentTop","headerHeight","setHeaderHeight","useEffect","document","contentRef","useCallback","node","headerHeight2","headersCollection","paddingHeader","modalContentHeight","contentHeight","styleContainer","useSpring","styleContent","onBGClick","e","portalNode","createPortal","_jsx","animated","modalStyles","modalContentWrapper","withCard","_jsxs","modalActionContainer","modalAction","modalActionCloseIcon","Card","cardHeader"],"mappings":"swBAuBO,MAAAA,EAAA,CAAA,CAAe,SAAAC,EACpBA,KAAAA,EACAC,MAAAA,EACAC,OAAAA,EACAC,YAAAA,EACAC,UAAAA,EACAC,cAAAA,EACAC,SAAAA,EAAAA,GACW,KAAAC,EACXA,YAAAA,EACAC,cAAAA,EAAAA,GACgB,aAAAC,EAAA,MAXI,IAAA,CAcpB,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,QAAA,SAAAX,CAAA,EACA,CAAAY,EAAAC,CAAA,EAAAF,EAAA,QAAA,SAAA,CAAA,EACA,CAAAG,EAAAC,CAAA,EAAAJ,EAAA,QAAA,SAAA,CAAA,EAEAK,EAAAA,QAAAA,UAAAA,IAAAA,CACEP,EACEQ,SAAAA,KAAAA,MAAAA,SAAAA,SAEAA,SAAAA,KAAAA,MAAAA,eAAAA,UAAAA,CACD,EAAA,CAAAR,CAAA,CAAA,EAGH,MAAAS,EAAAC,sBAAAC,GAAA,CAEI,GAAAA,EAAA,CACE,IAAAC,EAAA,EACA,MAAAC,EAAA,SAAA,qBAAA,QAAA,EACAC,GAAAD,EAAA,SACER,EAAAA,EAAAA,GAAAA,sBAAAA,EAAAA,OACAC,EAAAA,CAAAA,GAGF,MAAAS,EADA,OAAA,YACAH,EACAI,EAAAL,EAAA,sBAAA,EAAA,OACAI,EAAAC,EACEZ,EAAAA,KAAAA,MAAAA,EAAAA,EAAAA,EAAAA,CAAAA,CAAAA,EAEAA,EAAAA,CAAAA,CACD,CACF,EAAA,CAAAd,CAAA,CAAA,EAKL2B,EAAAC,EAAA,CAAiC,QAAA3B,EAAA,EAAA,EACX,OAAA,CACZ,SAAA,GACI,EADJ,QAAA,IAAA,CAINA,GACEU,EAAAA,EAAAA,CACD,EACF,OAAA,IAAA,CAECV,GACEU,EAAAA,EAAAA,CACD,CACF,CAAA,EAGHkB,EAAAD,EAAA,CAA+B,QAAA3B,EAAA,EAAA,EACT,UAAA,cAAAA,EAAA,GAAAY,MAAA,SACgC,OAAA,CAC5C,SAAA,GACI,CADJ,CAAA,EAKViB,EAAAC,GAAA,CACEA,EAAA,SAAAA,EAAA,eACEvB,GACD,EAGHwB,EAAA,OAAA,OAAA,IAAA,KAAA,SAAA,eAAAvB,CAAA,GAAA,SAAA,KAEA,MAAA,CAAAC,GAAA,CAAAsB,EAA6B,KAE7BC,uBAAAC,EAAAC,EAAA,IAAA,CACE,MAAAR,EAAqBA,UAAAA,EAAAA,EAAAA,eAAAA,CAAAA,EAA+B,SAAAO,EAAA,MAAA,CAClD,QAAAJ,EACWA,MAAAA,CACF,WAAAN,EAAAT,EAAA,CAA6C,EAA7C,UAAAqB,EAAA,oBACgBC,SAAAA,EAAAA,EAAAA,IAAAA,CAEvB,IAAAlB,EAAmBA,MAAAA,EAAmBU,UAAAA,EAAAA,aAAAA,CAAkD,KAAAtB,CAAEA,CAAAA,EAA3B,SAAA+B,EAAAC,EAAA,MAAA,CAE3D,UAAAH,EAAA,qBAA4BI,SAAAA,CAAAA,EAAAA,MAAAA,CAC1B,UAAAJ,EAAA,YAA4BK,SAAAA,IAAAA,OAAAA,EAAAA,EAAAA,CAExB,QAAAjC,EAAqBA,SAAAA,EAAAA,EAAAA,CACnB,UAAA4B,EAAA,oBAAkCM,CAAAA,CAAlC,CAAA,EAAAvC,GAAA,IAGQ,CAAA,EAAA+B,EAAAS,EAAA,CAId,MAAAzC,EACE,YAAAE,EACA,UAAAE,EACWA,gBAAAA,EAAAA,WACkBsC,SAAAA,CAJ/B,CAAA,CAAA,CAXF,CAAA,EAAA5C,CAqBAA,CAAAA,CAvBJ,CAAA,CALF,CAAA,EAAAgC,CAAA,CAmCL"}