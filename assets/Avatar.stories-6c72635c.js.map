{"version":3,"file":"Avatar.stories-6c72635c.js","sources":["../../src/components/avatar/Avatar.tsx"],"sourcesContent":["import { animated, useChain, useSpring, useSpringRef } from '@react-spring/web';\nimport { useEffect, useState } from 'react';\nimport { clsx } from '../../utils';\nimport { Spinner } from '../spinner';\nimport { avatarStyles } from './avatar.css';\n\ntype Props = {\n  src: string;\n  bg?: 'white';\n  name?: string;\n  size?: 's' | 'm' | 'l';\n  alt?: string;\n  className?: string;\n};\n\nexport const Avatar = ({ src, bg, size, alt, className }: Props) => {\n  const [loading, setLoading] = useState(true);\n  const imgSpringRef = useSpringRef();\n  const spinnerSpringRef = useSpringRef();\n  const styles = useSpring({\n    opacity: loading ? 0 : 1,\n    ref: imgSpringRef,\n  });\n  const spinStyles = useSpring({\n    opacity: loading ? 1 : 0,\n    ref: spinnerSpringRef,\n  });\n\n  useChain([spinnerSpringRef, imgSpringRef]);\n\n  useEffect(() => {\n    const pImg = new Image();\n    pImg.onload = () => setLoading(false);\n    pImg.src = src;\n  }, [src]);\n\n  return (\n    <div className={clsx(avatarStyles.container({ bg, size }), className)}>\n      {loading ? (\n        <animated.div className={avatarStyles.loading} style={spinStyles}>\n          <Spinner size={size} />\n        </animated.div>\n      ) : (\n        <animated.img src={src} alt={alt} className={avatarStyles.img} style={styles} />\n      )}\n    </div>\n  );\n};\n"],"names":["Avatar","src","bg","size","alt","className","loading","setLoading","useState","imgSpringRef","useSpringRef","spinnerSpringRef","styles","useSpring","spinStyles","useChain","useEffect","pImg","clsx","avatarStyles","animated","Spinner"],"mappings":"6kBAeO,MAAAA,EAAA,CAAA,CAAA,IAAAC,EAAA,GAAAC,EAAA,KAAAC,EAAA,IAAAC,EAAA,UAAAC,KAAA,CACL,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACAC,EAAAC,IACAC,EAAAD,IACAE,EAAAC,EAAA,CAAyB,QAAAP,EAAA,EAAA,EACA,IAAAG,CAClB,CAAA,EAEPK,EAAAD,EAAA,CAA6B,QAAAP,EAAA,EAAA,EACJ,IAAAK,CAClB,CAAA,EAGPI,OAAAA,EAAA,CAAAJ,EAAAF,CAAA,CAAA,EAEAO,EAAAA,UAAA,IAAA,CACE,MAAAC,EAAA,IAAA,MACAA,EAAA,OAAA,IAAAV,EAAA,EAAA,EACAU,EAAA,IAAAhB,CAAW,EAAA,CAAAA,CAAA,CAAA,EAGb,MAAA,cAAA,MAAA,CAAA,UAAAiB,EAAAC,EAAA,UAAA,CAAA,GAAAjB,EAAA,KAAAC,CAAA,CAAA,EAAAE,CAAA,GAAAC,EAAA,MAAA,cAAAc,EAAA,IAAA,CAAA,UAAAD,EAAA,QAAA,MAAAL,CAAA,EAAA,MAAA,cAAAO,EAAA,CAAA,KAAAlB,CAAA,CAAA,CAAA,EAAA,MAAA,cAAAiB,EAAA,IAAA,CAAA,IAAAnB,EAAA,IAAAG,EAAA,UAAAe,EAAA,IAAA,MAAAP,CAAA,CAAA,CAAA,CAWF;;;;;;;;;;;;;;;;;;;"}