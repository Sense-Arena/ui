{"version":3,"file":"GDPR.stories.6d4abfe1.js","sources":["../../src/utils/noop.ts","../../src/utils/local-store/index.ts","../../src/components/gdpr/consent-context.ts","../../src/components/gdpr/SwitchConsentItem.tsx","../../src/components/gdpr/ModalContainer.tsx","../../src/components/gdpr/Banner.tsx","../../src/components/gdpr/GDPR.tsx"],"sourcesContent":["export const noop = () => {\n  // do nothing\n};\n","export const enum LSKeys {\n  CookieConsent = 'cookie_consent',\n}\n\nexport type CookieConsentModel = {\n  required: boolean;\n  functional: boolean;\n  advertising: boolean;\n};\n\nexport interface LSData {\n  [LSKeys.CookieConsent]: CookieConsentModel | null;\n}\n\nconst getItem = <K extends LSKeys>(key: K, defaultValue: LSData[K]): LSData[K] => {\n  try {\n    const v = localStorage.getItem(key);\n    return v ? JSON.parse(v) : defaultValue;\n  } catch {\n    return defaultValue;\n  }\n};\nconst setItem = <K extends LSKeys>(key: K, value: LSData[K]) => {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (error) {\n    console.error(error);\n  }\n};\nconst deleteItem = <K extends LSKeys>(key: K) => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nexport const LS = {\n  getItem,\n  setItem,\n  deleteItem,\n};\n","import { createContext, Dispatch, SetStateAction } from 'react';\nimport { noop } from '../../utils';\nimport { CookieConsentModel } from '../../utils/local-store';\nimport { GDPRConfig } from './types';\n\nexport const ConsentContext = createContext<{\n  setConsent: Dispatch<SetStateAction<boolean>>;\n  config: GDPRConfig;\n  onSave: (consent: CookieConsentModel) => void;\n}>({\n  setConsent: noop,\n  onSave: noop,\n  config: {},\n});\n","import { ChangeEventHandler, useMemo } from 'react';\nimport { inputSwitch, labelSwitch, switcher } from '../../theme/switch.css';\nimport { switchContainer, switchHead, switchText } from './modal.css';\n\ntype Props = {\n  id: string;\n  title: string;\n  text: string;\n  checked: boolean;\n  disabled?: boolean;\n  onChange?: ChangeEventHandler<HTMLInputElement>;\n};\n\nexport const SwitchConsentItem = ({ id, title, text, checked, disabled = false, onChange }: Props) => {\n  const uniqId = useMemo(() => `switch-${id}`, [id]);\n  return (\n    <div className={switchContainer}>\n      <div className={switcher}>\n        <input\n          className={inputSwitch}\n          type=\"checkbox\"\n          id={uniqId}\n          onChange={onChange}\n          checked={checked}\n          disabled={disabled}\n        />\n        <label htmlFor={uniqId} className={labelSwitch} />\n      </div>\n      <div>\n        <span className={switchHead}>{title}</span>\n        <p className={switchText}>{text}</p>\n      </div>\n    </div>\n  );\n};\n","import { useCallback, useContext, useState } from 'react';\nimport { CookieConsentModel, LS, LSKeys } from '../../utils/local-store';\nimport { Button } from '../button';\nimport { ConsentContext } from './consent-context';\nimport { modalBtns, modalContainer, modalHead, modalLink, modalText, stickySave } from './modal.css';\nimport { SwitchConsentItem } from './SwitchConsentItem';\n\nexport const ModalContainer = () => {\n  const [choices, setChoice] = useState<CookieConsentModel>({ advertising: false, required: true, functional: false });\n  const { setConsent, config, onSave } = useContext(ConsentContext);\n\n  const deny = useCallback(() => {\n    const consent = { advertising: false, functional: false, required: true };\n    LS.setItem(LSKeys.CookieConsent, consent);\n    setConsent(true);\n    onSave(consent);\n  }, [onSave]);\n\n  const accept = useCallback(() => {\n    const consent = { advertising: true, functional: true, required: true };\n    LS.setItem(LSKeys.CookieConsent, consent);\n    setConsent(true);\n    onSave(consent);\n  }, [choices, onSave]);\n\n  const save = useCallback(() => {\n    LS.setItem(LSKeys.CookieConsent, choices);\n    setConsent(true);\n    onSave(choices);\n  }, [choices, onSave]);\n\n  return (\n    <div className={modalContainer} onClick={e => e.stopPropagation()}>\n      <h2 className={modalHead}>{config.modal?.heading}</h2>\n      <p className={modalText}>{config.modal?.text}</p>\n      <a className={modalLink} href={config.findOut?.link} target=\"_blank\">\n        {config.findOut?.text}\n      </a>\n\n      <div className={modalBtns}>\n        <Button onClick={accept}>{config.modal?.btnOk}</Button>\n        <Button onClick={deny} color=\"secondary\">\n          {config.modal?.btnDeny}\n        </Button>\n      </div>\n\n      <SwitchConsentItem\n        id=\"r\"\n        disabled\n        title={config.modal?.rHeading ?? ''}\n        checked={choices.required}\n        text={config.modal?.rText ?? ''}\n      />\n      <SwitchConsentItem\n        id=\"f\"\n        title={config.modal?.fHeading ?? ''}\n        checked={choices.functional}\n        onChange={e => setChoice(v => ({ ...v, functional: (e.target as any).checked }))}\n        text={config.modal?.fText ?? ''}\n      />\n      <SwitchConsentItem\n        id=\"a\"\n        title={config.modal?.aHeading ?? ''}\n        checked={choices.advertising}\n        onChange={e => setChoice(v => ({ ...v, advertising: (e.target as any).checked }))}\n        text={config.modal?.aText ?? ''}\n      />\n      <div className={stickySave}>\n        <Button onClick={save}>{config.modal?.btnSave}</Button>\n      </div>\n    </div>\n  );\n};\n","import { useCallback, useContext, useState } from 'react';\nimport { LS, LSKeys } from '../../utils/local-store';\nimport { Button } from '../button';\nimport { Modal } from '../modal';\nimport { ConsentContext } from './consent-context';\nimport { gdprStyles } from './gdpr.css';\nimport { ModalContainer } from './ModalContainer';\n\nexport const Banner = () => {\n  const { setConsent, config, onSave } = useContext(ConsentContext);\n  const [opened, setOpen] = useState(false);\n\n  const onAccept = useCallback(() => {\n    const consent = {\n      required: true,\n      advertising: true,\n      functional: true,\n    };\n    LS.setItem(LSKeys.CookieConsent, consent);\n    setConsent(true);\n    onSave(consent);\n  }, [onSave]);\n  const openModal = useCallback(() => {\n    setOpen(true);\n  }, []);\n  const closeModal = useCallback(() => {\n    setOpen(false);\n  }, []);\n\n  return (\n    <>\n      <div className={gdprStyles.cookieContainer}>\n        <div>\n          <h1 className={gdprStyles.cookieHead}>{config.banner?.heading}</h1>\n          <p className={gdprStyles.cookieText}>\n            {config.banner?.text}{' '}\n            <a className={gdprStyles.cookieLink} href={config.findOut?.link} target=\"_blank\">\n              {config.findOut?.text}\n            </a>\n          </p>\n        </div>\n        <div className={gdprStyles.cookieBtns}>\n          <Button onClick={onAccept}>{config.banner?.btnOk}</Button>\n          <Button onClick={openModal} color=\"secondary\">\n            {config.banner?.btnEdit}\n          </Button>\n        </div>\n      </div>\n      <Modal open={opened} handleClose={closeModal} withCard={false}>\n        <ModalContainer />\n      </Modal>\n    </>\n  );\n};\n","import { useEffect, useState } from 'react';\nimport { noop } from '../../utils';\nimport { CookieConsentModel, LS, LSKeys } from '../../utils/local-store';\nimport { Banner } from './Banner';\nimport { ConsentContext } from './consent-context';\nimport { GDPRConfig } from './types';\n\nexport const gdprDefaultConfig: GDPRConfig = {\n  banner: {\n    heading: 'Cookies',\n    text: 'We use cookies to collect and analyze information about the performance and use of the website, to ensure the functioning of social media functions, and to improve and customize content and advertising.',\n    btnOk: 'accept all',\n    btnEdit: 'edit settings',\n  },\n  findOut: {\n    text: 'Find out more',\n    link: 'https://www.sensearena.com/terms-and-conditions',\n  },\n  modal: {\n    heading: 'Information about cookies on this website',\n    text: 'The cookies used on this site are divided into categories. Below, you can find out more about each category and allow or deny some or all of them. Once you disable categories that were previously enabled, all cookies associated with that category will be deleted from your browser. You can also see a list of cookies that are assigned to each of the categories and detailed information in the cookie statement.',\n    btnOk: 'accept all',\n    btnSave: 'save settings',\n    btnDeny: 'deny all',\n    rHeading: 'Required Cookies',\n    rText:\n      'These cookies are necessary for the website to function and cannot be switched off in our systems. You can set your browser to block or alert you about these cookies, but this may affect how the website functions.',\n    fHeading: 'Functional Cookies',\n    fText:\n      'These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. These cookies also enable the website to provide enhanced functionality and personalization.',\n    aHeading: 'Advertising Cookies',\n    aText:\n      'These cookies are capable of tracking your browser across other sites and building up a profile of your interests. They do not store direct personal information but are based on uniquely identifying your browser and internet device.',\n  },\n};\n\ntype Props = {\n  config?: GDPRConfig;\n  onSave?: (consent: CookieConsentModel) => void;\n};\n\nexport const GDPR = ({ config = gdprDefaultConfig, onSave = noop }: Props) => {\n  const [hasConsent, setConsent] = useState(true);\n\n  useEffect(() => {\n    setConsent(!!LS.getItem(LSKeys.CookieConsent, null));\n  }, []);\n\n  if (hasConsent) return null;\n\n  return (\n    <ConsentContext.Provider value={{ setConsent, config, onSave }}>\n      <Banner />\n    </ConsentContext.Provider>\n  );\n};\n"],"names":["noop","LSKeys","getItem","key","defaultValue","v","setItem","value","error","deleteItem","LS","ConsentContext","createContext","SwitchConsentItem","id","title","text","checked","onChange","uniqId","useMemo","_jsxs","switchContainer","switcher","inputSwitch","disabled","_jsx","labelSwitch","switchHead","switchText","ModalContainer","choices","setChoice","useState","advertising","required","functional","setConsent","config","onSave","useContext","deny","useCallback","consent","CookieConsent","accept","save","modalContainer","e","stopPropagation","modalHead","modal","heading","modalText","modalLink","findOut","link","modalBtns","Button","btnOk","btnDeny","rHeading","rText","fHeading","target","fText","aHeading","aText","stickySave","btnSave","Banner","opened","setOpen","onAccept","openModal","closeModal","_Fragment","gdprStyles","cookieContainer","cookieHead","banner","cookieText","cookieLink","cookieBtns","btnEdit","Modal","gdprDefaultConfig","GDPR","hasConsent","useEffect"],"mappings":"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"}