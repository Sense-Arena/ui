{"version":3,"file":"Modal.5e98e9d0.js","sources":["../../src/components/modal/Modal.tsx"],"sourcesContent":["import { PropsWithChildren, ReactNode, MouseEvent, useCallback, useEffect, useState } from 'react';\nimport { modalStyles } from './modal.css';\nimport { Card } from '../card';\nimport { CloseIcon } from '../../icons';\nimport { clsx } from '../../utils';\nimport { IconButton } from '../icon-button';\nimport { animated, useSpring } from '@react-spring/web';\n\ntype PropsModal = PropsWithChildren<{\n  open: boolean;\n  title?: ReactNode;\n  action?: ReactNode | false;\n  withPadding?: boolean;\n  className?: string;\n  cardClassName?: string;\n  withCard?: boolean;\n  size?: 's' | 'm' | 'l';\n  handleClose: () => void;\n  paddingHeader?: boolean;\n}>;\n\nexport const Modal = ({\n  children,\n  open,\n  title,\n  action,\n  withPadding,\n  className,\n  cardClassName,\n  withCard = true,\n  size,\n  handleClose,\n  paddingHeader = true,\n}: PropsModal) => {\n  const [mounted, setMounted] = useState(open);\n  const [contentTop, setContentTop] = useState(0);\n  const [headerHeight, setHeaderHeight] = useState(0);\n\n  useEffect(() => {\n    if (mounted) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.removeProperty('overflow');\n    }\n  }, [mounted]);\n\n  const contentRef = useCallback(\n    (node: HTMLDivElement) => {\n      if (node) {\n        let headerHeight = 0;\n        const headersCollection = document.getElementsByTagName('header');\n        if (paddingHeader && headersCollection.length) {\n          headerHeight = headersCollection[0].getBoundingClientRect().height;\n          setHeaderHeight(headerHeight);\n        }\n        const bodyHeight = document.documentElement.getBoundingClientRect().height;\n        const modalContentHeight = bodyHeight - headerHeight;\n        const contentHeight = node.getBoundingClientRect().height;\n        if (modalContentHeight > contentHeight) {\n          setContentTop(Math.round(modalContentHeight / 2 - contentHeight / 2));\n        } else {\n          setContentTop(0);\n        }\n      }\n    },\n    [children],\n  );\n\n  const styleContainer = useSpring({\n    opacity: open ? 1 : 0,\n    config: {\n      duration: 300,\n    },\n    onStart: () => {\n      if (open) {\n        setMounted(true);\n      }\n    },\n    onRest: () => {\n      if (!open) {\n        setMounted(false);\n      }\n    },\n  });\n\n  const styleContent = useSpring({\n    opacity: open ? 1 : 0,\n    transform: `translateY(${open ? `${contentTop}px` : '0px'})`,\n    config: {\n      duration: 300,\n    },\n  });\n\n  const onBGClick = (e: MouseEvent<HTMLDivElement>) => {\n    if (e.target === e.currentTarget) {\n      handleClose();\n    }\n  };\n\n  if (!mounted) return null;\n\n  return (\n    <animated.div style={styleContainer} className={clsx(modalStyles.modalContainer, className)}>\n      <div\n        onClick={onBGClick}\n        style={{ paddingTop: paddingHeader && contentTop < headerHeight ? headerHeight : 0 }}\n        className={modalStyles.modalContentWrapper}\n      >\n        <animated.div ref={contentRef} style={styleContent} className={modalStyles.modalContent({ size })}>\n          {withCard ? (\n            <div className={modalStyles.modalActionContainer}>\n              <div className={modalStyles.modalAction}>\n                {action === undefined ? (\n                  <IconButton onClick={handleClose}>\n                    <CloseIcon className={modalStyles.modalActionCloseIcon} />\n                  </IconButton>\n                ) : (\n                  action || null\n                )}\n              </div>\n\n              <Card\n                title={title}\n                withPadding={withPadding}\n                className={cardClassName}\n                classNameHeader={modalStyles.cardHeader}\n              >\n                {children}\n              </Card>\n            </div>\n          ) : (\n            children\n          )}\n        </animated.div>\n      </div>\n    </animated.div>\n  );\n};\n"],"names":["Modal","children","open","title","action","withPadding","className","cardClassName","size","handleClose","mounted","setMounted","useState","contentTop","setContentTop","headerHeight","setHeaderHeight","useEffect","document","contentRef","useCallback","node","headerHeight2","headersCollection","paddingHeader","modalContentHeight","contentHeight","styleContainer","useSpring","styleContent","onBGClick","e","_jsx","animated","modalStyles","modalContentWrapper","withCard","_jsxs","modalActionContainer","modalAction","modalActionCloseIcon","Card","cardHeader"],"mappings":"+tBAqBO,MAAAA,EAAA,CAAA,CAAe,SAAAC,EACpBA,KAAAA,EACAC,MAAAA,EACAC,OAAAA,EACAC,YAAAA,EACAC,UAAAA,EACAC,cAAAA,EACAC,SAAAA,EAAAA,GACW,KAAAC,EACXA,YAAAA,EACAC,cAAAA,EAAAA,EAVoB,IAAA,CAapB,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,QAAA,SAAAV,CAAA,EACA,CAAAW,EAAAC,CAAA,EAAAF,EAAA,QAAA,SAAA,CAAA,EACA,CAAAG,EAAAC,CAAA,EAAAJ,EAAA,QAAA,SAAA,CAAA,EAEAK,EAAAA,QAAAA,UAAAA,IAAAA,CACEP,EACEQ,SAAAA,KAAAA,MAAAA,SAAAA,SAEAA,SAAAA,KAAAA,MAAAA,eAAAA,UAAAA,CACD,EAAA,CAAAR,CAAA,CAAA,EAGH,MAAAS,EAAAC,sBAAAC,GAAA,CAEI,GAAAA,EAAA,CACE,IAAAC,EAAA,EACA,MAAAC,EAAA,SAAA,qBAAA,QAAA,EACAC,GAAAD,EAAA,SACER,EAAAA,EAAAA,GAAAA,sBAAAA,EAAAA,OACAC,EAAAA,CAAAA,GAGF,MAAAS,EADA,SAAA,gBAAA,sBAAA,EAAA,OACAH,EACAI,EAAAL,EAAA,sBAAA,EAAA,OACAI,EAAAC,EACEZ,EAAAA,KAAAA,MAAAA,EAAAA,EAAAA,EAAAA,CAAAA,CAAAA,EAEAA,EAAAA,CAAAA,CACD,CACF,EAAA,CAAAb,CAAA,CAAA,EAKL0B,EAAAC,EAAA,CAAiC,QAAA1B,EAAA,EAAA,EACX,OAAA,CACZ,SAAA,GACI,EADJ,QAAA,IAAA,CAINA,GACES,EAAAA,EAAAA,CACD,EACF,OAAA,IAAA,CAECT,GACES,EAAAA,EAAAA,CACD,CACF,CAAA,EAGHkB,EAAAD,EAAA,CAA+B,QAAA1B,EAAA,EAAA,EACT,UAAA,cAAAA,EAAA,GAAAW,MAAA,SACgC,OAAA,CAC5C,SAAA,GACI,CADJ,CAAA,EAKViB,EAAAC,GAAA,CACEA,EAAA,SAAAA,EAAA,eACEtB,GACD,EAGH,OAAAC,EAEAsB,EAAAC,EAAA,IAAA,CACE,MAAAN,EAAqBA,UAAAA,EAAAA,EAAAA,eAAAA,CAAAA,EAA+B,SAAAK,EAAA,MAAA,CAClD,QAAAF,EACWA,MAAAA,CACF,WAAAN,GAAAX,EAAAE,EAAAA,EAAA,CAA0E,EAA1E,UAAAmB,EAAA,oBACgBC,SAAAA,EAAAA,EAAAA,IAAAA,CAEvB,IAAAhB,EAAmBA,MAAAA,EAAmBU,UAAAA,EAAAA,aAAAA,CAAkD,KAAArB,CAAEA,CAAAA,EAA3B,SAAA4B,EAAAC,EAAA,MAAA,CAE3D,UAAAH,EAAA,qBAA4BI,SAAAA,CAAAA,EAAAA,MAAAA,CAC1B,UAAAJ,EAAA,YAA4BK,SAAAA,IAAAA,OAAAA,EAAAA,EAAAA,CAExB,QAAA9B,EAAqBA,SAAAA,EAAAA,EAAAA,CACnB,UAAAyB,EAAA,oBAAkCM,CAAAA,CAAlC,CAAA,EAAApC,GAAA,IAGQ,CAAA,EAAA4B,EAAAS,EAAA,CAId,MAAAtC,EACE,YAAAE,EACA,UAAAE,EACWA,gBAAAA,EAAAA,WACkBmC,SAAAA,CAJ/B,CAAA,CAAA,CAXF,CAAA,EAAAzC,CAqBAA,CAAAA,CAvBJ,CAAA,CALF,CAAA,EAJU,IAsCf"}